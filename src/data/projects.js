// src/data/projects.js
import { screensBySlug } from "./ProjectImage";

// -----------------------------
// helpers
// -----------------------------
function buildScreens(slug, captions) {
  const imgs = screensBySlug?.[slug] ?? [];

  // ✅ 혹시라도 src로 정렬이 필요하면 여기서 한 번 더 정렬(보험)
  const sorted = [...imgs].sort((a, b) => (a.src || "").localeCompare(b.src || "", "ko"));

  return sorted.map((it, i) => ({
    src: it.src,
    alt: `${slug} screen ${i + 1}`,
    caption: captions?.[i] ?? `Screen ${i + 1}`,
  }));  
}

function applyScreenDetails(screens, detailMap) {
  // ✅ 긴 키 우선 매칭 (오매칭 방지)
  const keys = Object.keys(detailMap).sort((a, b) => b.length - a.length);

  return screens.map((s) => {
    const cap = s.caption || "";
    const key = keys.find((k) => cap.includes(k));
    return key ? { ...s, detail: detailMap[key] } : s;
  });
}

export const projects = [
  // =========================
  // NovaTrip (담당: 메인페이지, 게시글작성)
  // =========================
  (() => {
    const captions = [
      "메인 페이지",
      "로그인",
      "회원가입",
      "아이디 찾기",
      "비밀번호 찾기",
      "게시글 작성: 포스트 작성",
      "게시글 작성: 일정 선택",
      "게시글 작성: 동행 위치 선택",
      "게시글 작성: 동행 정보 입력",
      "게시글 작성: 동행 조건 선택",
      "게시글 상세 페이지",
      "내 정보(프로필)",
      "내 정보: 즐겨찾기 게시글",
      "내 정보: 내가 작성한 게시글",
      "내 정보: 좋아요 게시글",
      "축제 정보 페이지",
      "축제 정보 상세 페이지",
      "지도 페이지",
      "관리자: 게시글 관리",
      "관리자: 공지사항 작성",
      "관리자: 광고 설정",
      "관리자: 댓글 관리",
      "관리자: 회원 관리",
    ];

    let screens = buildScreens("novatrip", captions);

    const myScreensKeywords = ["메인", "게시글 작성", "일정 선택", "동행 위치 선택", "동행 정보 입력", "동행 조건 선택"];

    // ✅ 전체 화면에 detail 부여(캡션 일부 포함 매칭)
    const detailMap = {
      // 내 담당 화면
      "메인 페이지":
        "서비스 진입 화면으로 주요 메뉴/동선을 정리하고, 게시글 작성 및 탐색으로 자연스럽게 이어지도록 구성했습니다.",
      "게시글 작성: 포스트 작성":
        "작성 플로우의 시작 단계(제목/내용 등)를 구성하고 다음 단계로 상태를 전달하는 흐름을 설계했습니다.",
      "게시글 작성: 일정 선택":
        "일정 입력 단계를 분리해 입력 실수를 줄이고, 작성 데이터를 단계별로 누적하는 구조로 구성했습니다.",
      "게시글 작성: 동행 위치 선택":
        "지도 기반 위치 선택 단계로 동행 장소를 직관적으로 입력하도록 구성하고 다음 단계로 연결했습니다.",
      "게시글 작성: 동행 정보 입력":
        "동행 관련 핵심 정보(모집/설명 등) 입력 UI를 구성하고 필수값 중심으로 검증 흐름을 고려했습니다.",
      "게시글 작성: 동행 조건 선택":
        "인원/조건 등의 선택 단계를 분리해 작성 완료까지 자연스럽게 진행되도록 멀티스텝 플로우를 완성했습니다.",
      
      // 인증 관련
      "로그인":
        "이메일/비밀번호 기반 로그인 화면으로, 서비스 접근을 위한 기본 인증 흐름을 제공합니다.",
      "회원가입":
        "신규 사용자 가입을 위한 입력 폼으로, 필수 정보 입력과 유효성 검증을 처리합니다.",
      "아이디 찾기":
        "가입 시 등록한 정보를 통해 아이디를 찾을 수 있는 계정 복구 화면입니다.",
      "비밀번호 찾기":
        "이메일 인증을 통해 비밀번호를 재설정할 수 있는 계정 복구 화면입니다.",
      
      // 게시글 상세
      "게시글 상세 페이지":
        "동행 모집 게시글의 상세 내용을 확인하고, 참여 신청이나 댓글을 작성할 수 있는 화면입니다.",
      
      // 내 정보 관련
      "내 정보(프로필)":
        "사용자의 프로필 정보와 활동 내역을 확인하고 관리할 수 있는 마이페이지입니다.",
      "내 정보: 즐겨찾기 게시글":
        "사용자가 즐겨찾기로 저장한 게시글 목록을 모아볼 수 있는 화면입니다.",
      "내 정보: 내가 작성한 게시글":
        "사용자가 직접 작성한 동행 모집 게시글 목록을 관리하는 화면입니다.",
      "내 정보: 좋아요 게시글":
        "사용자가 좋아요를 누른 게시글 목록을 확인할 수 있는 화면입니다.",
      
      // 축제/지도
      "축제 정보 페이지":
        "지역별 축제 정보를 탐색하고 필터링할 수 있는 축제 목록 화면입니다.",
      "축제 정보 상세 페이지":
        "선택한 축제의 일정, 장소, 프로그램 등 상세 정보를 제공하는 화면입니다.",
      "지도 페이지":
        "지도 기반으로 여행지와 동행 모집 위치를 시각적으로 탐색할 수 있는 화면입니다.",
      
      // 관리자 페이지
      "관리자: 게시글 관리":
        "운영자가 전체 게시글을 조회하고 부적절한 게시글을 관리할 수 있는 관리자 화면입니다.",
      "관리자: 공지사항 작성":
        "서비스 공지사항을 작성하고 게시할 수 있는 관리자 화면입니다.",
      "관리자: 광고 설정":
        "서비스 내 배너 광고를 설정하고 관리할 수 있는 관리자 화면입니다.",
      "관리자: 댓글 관리":
        "전체 댓글을 모니터링하고 부적절한 댓글을 삭제할 수 있는 관리자 화면입니다.",
      "관리자: 회원 관리":
        "가입 회원 목록을 조회하고 회원 상태를 관리할 수 있는 관리자 화면입니다.",
    };
    screens = applyScreenDetails(screens, detailMap);

    return {
      slug: "novatrip",
      title: "NovaTrip",
      subtitle: "여행 동행/게시글/지도 기반 커뮤니티",
      screenshot: screensBySlug.novatrip?.[0]?.src || "",
      stack: ["Node.js", "React", "MongoDB", "Maps API"],
      tags: ["Community", "Multi-step Form", "Map"],
      links: { repo: "", demo: "", docs: "" },

      // ✅ 담당 키워드(상세에서 ‘내 담당 화면만 보기’ 토글 활성화)
      myScreensKeywords,

      summary: [
        "여행 동행 모집 커뮤니티의 핵심 사용자 흐름(메인 → 작성 → 상세)을 화면 중심으로 구성",
        "게시글 작성 과정을 단계화(일정/위치/조건)해 입력 UX를 개선",
        "지도 기반 위치 선택을 포함해 작성 정확도와 사용성을 강화",
      ],
      highlights: [
        "메인 페이지 및 게시글 작성(멀티스텝) 담당",
        "작성 단계를 분리해 입력 부담을 낮추고 작성 흐름을 명확히 구성",
      ],

      screens,

      // ✅ 내 담당 기능만 features에 작성
      features: [
        {
          title: "메인 페이지(진입/탐색 UX)",
          desc: "핵심 메뉴와 진입 동선을 정리해 사용자가 ‘탐색 → 작성’으로 빠르게 이동할 수 있도록 화면 구성을 담당했습니다.",
        },
        {
          title: "게시글 작성: 멀티스텝 플로우 설계",
          desc: "작성 과정을 ‘포스트 → 일정 → 위치(지도) → 정보 → 조건’ 단계로 분리해 입력 실수를 줄이고 단계별 진행이 자연스럽도록 구성했습니다.",
        },
        {
          title: "게시글 작성: 일정/위치/조건 입력 UX",
          desc: "일정 선택과 지도 기반 위치 선택, 조건 입력을 순차적으로 연결해 작성 완료까지의 사용자 경험을 안정적으로 만들었습니다.",
        },
      ],
    };
  })(),

  // =========================
  // NovaFund (담당: 로그인/회원가입/찾기, 내정보, 캐시내역, 후원관리, 관리자, 출금)
  // =========================
  (() => {
    const captions = [
      "메인 페이지",
      "로그인",
      "회원가입",
      "아이디/비밀번호 찾기",
      "이메일 임시 비밀번호 안내",
      "내 정보",
      "내 프로젝트",
      "설정 페이지",
      "캐시 이용 내역",
      "후원 관리",
      "프로젝트 만들기(1): 기본정보",
      "프로젝트 만들기(2): 상세정보",
      "프로젝트 만들기(3): 검토/완료",
      "리워드 선택",
      "프로젝트 상세(1)",
      "프로젝트 상세(2)",
      "프로젝트 상세(3)",
      "프로젝트 리뷰",
      "펀딩 참여자 목록",
      "결제 페이지",
      "결제 완료",
      "캐시 충전",
      "관리자 페이지",
      "출금 페이지",
    ];

    let screens = buildScreens("novafund", captions);

    const myScreensKeywords = ["로그인", "회원가입", "아이디/비밀번호", "내 정보", "캐시 이용 내역", "후원 관리", "관리자 페이지", "출금 페이지", "이메일 임시"];

    const detailMap = {
      // 내 담당 화면
      "로그인":
        "서비스 접근을 위한 인증 흐름을 구성하고, 로그인 성공/실패 케이스를 고려한 화면 상태를 정리했습니다.",
      "회원가입":
        "회원가입 입력 폼과 유효성 흐름을 구성해 사용자 온보딩 경험을 완성했습니다.",
      "아이디/비밀번호 찾기":
        "계정 복구 UX를 위해 아이디/비밀번호 찾기 화면을 제공하고, 복구 절차를 명확히 안내했습니다.",
      "이메일 임시 비밀번호":
        "임시 비밀번호 발급/안내 흐름을 사용자 관점에서 이해하기 쉽게 구성했습니다.",
      "내 정보":
        "사용자 계정 정보를 확인/관리할 수 있도록 마이페이지(내 정보) 화면을 구성했습니다.",
      "캐시 이용 내역":
        "캐시 사용 이력을 확인할 수 있도록 내역 화면을 구성해 결제/후원 이후의 관리 경험을 강화했습니다.",
      "후원 관리":
        "사용자 후원 내역을 조회/관리할 수 있는 화면을 구현해 결제 이후 흐름을 완성했습니다.",
      "관리자 페이지":
        "운영자가 서비스 데이터를 관리할 수 있도록 관리자 화면을 구성해 운영 기능을 포함했습니다.",
      "출금 페이지":
        "출금 관련 화면을 구성해 운영 프로세스(정산/출금)의 사용자/관리 흐름을 지원했습니다.",
      
      // 메인/프로젝트 관련
      "메인 페이지":
        "서비스 진입점으로 인기 프로젝트, 신규 프로젝트 등을 탐색할 수 있는 랜딩 화면입니다.",
      "내 프로젝트":
        "사용자가 생성한 펀딩 프로젝트 목록을 관리하고 상태를 확인할 수 있는 화면입니다.",
      "설정 페이지":
        "알림, 개인정보 등 사용자 계정 설정을 변경할 수 있는 환경설정 화면입니다.",
      
      // 프로젝트 생성
      "프로젝트 만들기(1): 기본정보":
        "펀딩 프로젝트 생성의 첫 단계로, 제목/카테고리/목표금액 등 기본 정보를 입력합니다.",
      "프로젝트 만들기(2): 상세정보":
        "프로젝트 설명, 이미지, 일정 등 상세 정보를 입력하는 두 번째 단계입니다.",
      "프로젝트 만들기(3): 검토/완료":
        "입력한 정보를 최종 검토하고 프로젝트 등록을 완료하는 마지막 단계입니다.",
      "리워드 선택":
        "후원자가 펀딩 금액에 따라 받을 수 있는 리워드를 선택하는 화면입니다.",
      
      // 프로젝트 상세
      "프로젝트 상세(1)":
        "프로젝트의 대표 이미지와 핵심 정보, 펀딩 현황을 보여주는 상세 페이지 상단입니다.",
      "프로젝트 상세(2)":
        "프로젝트의 상세 설명과 스토리를 확인할 수 있는 중간 영역입니다.",
      "프로젝트 상세(3)":
        "리워드 옵션과 펀딩 참여 버튼이 있는 상세 페이지 하단 영역입니다.",
      "프로젝트 리뷰":
        "펀딩 완료 후 후원자들이 작성한 리뷰를 확인할 수 있는 화면입니다.",
      "펀딩 참여자 목록":
        "해당 프로젝트에 참여한 후원자 목록과 참여 현황을 보여주는 화면입니다.",
      
      // 결제/충전
      "결제 페이지":
        "선택한 리워드와 금액을 확인하고 결제를 진행하는 화면입니다.",
      "결제 완료":
        "결제가 성공적으로 완료된 후 결과를 안내하는 화면입니다.",
      "캐시 충전":
        "서비스 내 캐시를 충전하기 위한 금액 선택 및 결제 화면입니다.",
    };
    screens = applyScreenDetails(screens, detailMap);

    return {
      slug: "novafund",
      title: "NovaFund",
      subtitle: "펀딩/후원 플랫폼 (캐시/후원관리/운영 기능 포함)",
      screenshot: screensBySlug.novafund?.[0]?.src || "",
      stack: ["Java", "Spring MVC", "JSP", "Oracle"],
      tags: ["Auth", "Cash", "Admin", "Funding"],
      links: { repo: "", demo: "", docs: "" },

      myScreensKeywords,

      summary: [
        "후원 플랫폼의 인증/계정 관리와 운영 기능(후원 관리/관리자/출금)을 담당",
        "캐시 이용 내역을 통해 결제/후원 이후의 사용자 관리 경험을 제공",
        "운영자가 관리할 수 있는 관리자 페이지를 포함해 서비스 운영 관점 기능을 구성",
      ],
      highlights: [
        "로그인/회원가입/계정찾기 + 내정보 + 캐시 이용 내역 담당",
        "후원 관리 + 관리자 페이지 + 출금 화면 담당",
      ],

      screens,

      features: [
        {
          title: "인증: 로그인/회원가입",
          desc: "서비스 접근을 위한 로그인/회원가입 흐름을 구성하고, 사용자 온보딩의 기본 UX를 완성했습니다.",
        },
        {
          title: "계정 복구: 아이디·비밀번호 찾기 + 임시 비밀번호 안내",
          desc: "계정 복구 과정을 화면 단위로 명확히 구성하고, 이메일 임시 비밀번호 안내까지 포함해 복구 UX를 완성했습니다.",
        },
        {
          title: "마이페이지: 내 정보",
          desc: "사용자 계정 정보를 확인/관리할 수 있도록 내 정보 화면을 구성했습니다.",
        },
        {
          title: "캐시 이용 내역",
          desc: "캐시 사용 이력을 제공해 결제/후원 이후 사용자가 자신의 이용 흐름을 확인할 수 있도록 구성했습니다.",
        },
        {
          title: "후원 관리",
          desc: "후원 내역 조회/관리 화면을 구성해 후원 완료 이후의 관리 경험을 제공했습니다.",
        },
        {
          title: "운영 기능: 관리자 페이지 + 출금",
          desc: "관리자 페이지와 출금 화면을 구성해 운영 프로세스(관리/정산/출금) 측면의 기능을 포함했습니다.",
        },
      ],
    };
  })(),

  // =========================
  // BaroFarm (담당: 로그인/회원가입/찾기, 마이페이지, 판매자등록, 판매자페이지)
  // =========================
  (() => {
    const captions = [
      "메인페이지",
      "로그인",
      "회원가입",
      "아이디/비밀번호 찾기",
      "마이페이지 메인",
      "마이페이지: 배송지 관리",
      "마이페이지: 배송지 추가",
      "마이페이지: 개인정보 수정",
      "상품 상세(메인)",
      "상품 상세(상세설명)",
      "상품 네비/탭 영역",
      "리뷰 작성",
      "반품/교환 안내",
      "상품 문의",
      "상품 문의 등록",
      "장바구니",
      "결제 확인",
      "결제 진행",
      "결제 완료",
      "판매자 등록(약관/동의)",
      "판매자 등록 신청",
      "판매자 대시보드",
      "판매자: 상품 관리",
      "상품 등록(1)",
      "상품 등록(2)",
      "상품 등록(3)",
      "판매자: 정산 관리",
      "판매자: 주문/배송 관리",
      "판매자: 정보 관리",
      "시세 정보 상세(1)",
      "시세 정보 상세(2)",
      "시세 정보 상세(3)",
      "시세 정보 상세(4)",
      "시세 정보 상세(5)",
      "시세 정보 상세(6)",
      "시세 정보 상세(7)",
      "시세 정보 상세(8)",
      "시세 정보 상세(9)",
      "AI 가격 예측 모델 화면",
    ];

    let screens = buildScreens("barofarm", captions);

    const myScreensKeywords = [
      "로그인",
      "회원가입",
      "아이디/비밀번호",
      "마이페이지",
      "판매자 등록",
      "판매자 대시보드",
      "판매자:",
    ];

    const detailMap = {
      // 메인
      "메인페이지":
        "서비스 진입점으로 주요 상품과 카테고리를 탐색할 수 있는 랜딩 화면입니다.",
      
      // 내 담당 화면 - 인증/마이페이지
      "로그인":
        "사용자 인증 진입 화면을 구성하고 기본 로그인 흐름을 정리했습니다.",
      "회원가입":
        "회원가입 입력 UI 및 온보딩 흐름을 구성했습니다.",
      "아이디/비밀번호 찾기":
        "계정 복구를 위한 아이디/비밀번호 찾기 화면을 구성했습니다.",
      "마이페이지 메인":
        "사용자 계정 관리의 시작점(마이페이지 메인)을 구성했습니다.",
      "배송지 관리":
        "배송지 목록/관리 화면을 구성해 주문을 위한 기본 계정 기능을 제공했습니다.",
      "배송지 추가":
        "배송지 추가 화면을 구성하고 입력 흐름을 단순화했습니다.",
      "개인정보 수정":
        "개인정보 수정 UI를 구성해 사용자 정보 변경 흐름을 제공했습니다.",
      
      // 내 담당 화면 - 판매자
      "판매자 등록(약관/동의)":
        "판매자 온보딩을 위해 약관 동의 단계를 구성했습니다.",
      "판매자 등록 신청":
        "판매자 등록 신청 화면을 구성해 일반 사용자 → 판매자 전환 흐름을 완성했습니다.",
      "판매자 대시보드":
        "판매자 페이지의 메인 대시보드 화면을 구성해 운영 기능으로 확장 가능한 구조를 마련했습니다.",
      "판매자: 상품 관리":
        "판매자 관리 화면으로의 진입/구조를 구성해 판매자 기능 흐름을 정리했습니다.",
      "판매자: 정보 관리":
        "판매자 정보 관리 화면을 통해 판매자 계정 운영 경험을 제공했습니다.",
      "판매자: 정산 관리":
        "판매 수익 정산 내역을 확인하고 출금을 요청할 수 있는 판매자 화면입니다.",
      "판매자: 주문/배송 관리":
        "들어온 주문을 확인하고 배송 상태를 업데이트할 수 있는 판매자 화면입니다.",
      
      // 상품 관련
      "상품 상세(메인)":
        "상품의 대표 이미지, 가격, 기본 정보를 보여주는 상세 페이지 상단입니다.",
      "상품 상세(상세설명)":
        "상품의 상세 설명과 이미지를 확인할 수 있는 영역입니다.",
      "상품 네비/탭 영역":
        "상품 상세 페이지 내 탭 네비게이션으로 상세/리뷰/문의 등을 전환합니다.",
      "상품 등록(1)":
        "상품 등록 첫 번째 단계로 기본 정보(상품명/카테고리/가격)를 입력합니다.",
      "상품 등록(2)":
        "상품 등록 두 번째 단계로 상세 설명과 이미지를 등록합니다.",
      "상품 등록(3)":
        "상품 등록 마지막 단계로 배송 정보와 옵션을 설정하고 등록을 완료합니다.",
      
      // 리뷰/문의
      "리뷰 작성":
        "구매한 상품에 대한 별점과 후기를 작성하는 화면입니다.",
      "반품/교환 안내":
        "상품의 반품/교환 정책과 절차를 안내하는 화면입니다.",
      "상품 문의":
        "해당 상품에 대한 문의 목록을 확인할 수 있는 화면입니다.",
      "상품 문의 등록":
        "상품에 대한 질문을 작성하여 판매자에게 문의하는 화면입니다.",
      
      // 장바구니/결제
      "장바구니":
        "담아둔 상품 목록을 확인하고 수량 조절/삭제 후 주문으로 진행하는 화면입니다.",
      "결제 확인":
        "주문 상품, 배송지, 결제 금액을 최종 확인하는 주문서 화면입니다.",
      "결제 진행":
        "결제 수단을 선택하고 결제를 처리하는 진행 중 화면입니다.",
      "결제 완료":
        "결제가 성공적으로 완료된 후 주문 정보를 안내하는 화면입니다.",
      
      // 시세 정보
      "시세 정보 상세(1)":
        "농산물 시세 정보 페이지의 헤더 영역으로 품목 선택과 기간 필터를 제공합니다.",
      "시세 정보 상세(2)":
        "선택한 농산물의 현재 시세와 가격 변동 추이를 보여주는 차트 영역입니다.",
      "시세 정보 상세(3)":
        "일별/주별 시세 데이터를 테이블 형태로 확인할 수 있는 영역입니다.",
      "시세 정보 상세(4)":
        "지역별 시세 비교 데이터를 시각화하여 보여주는 영역입니다.",
      "시세 정보 상세(5)":
        "전년 동기 대비 가격 변동률을 분석하여 보여주는 영역입니다.",
      "시세 정보 상세(6)":
        "품목별 거래량 추이를 차트로 확인할 수 있는 영역입니다.",
      "시세 정보 상세(7)":
        "도매/소매 가격 비교 정보를 제공하는 영역입니다.",
      "시세 정보 상세(8)":
        "계절별 가격 패턴과 예상 시세를 안내하는 영역입니다.",
      "시세 정보 상세(9)":
        "관련 뉴스와 시장 동향 정보를 제공하는 영역입니다.",
      "AI 가격 예측 모델 화면":
        "머신러닝 기반 농산물 가격 예측 결과를 시각화하여 보여주는 화면입니다.",
    };
    screens = applyScreenDetails(screens, detailMap);

    return {
      slug: "barofarm",
      title: "BaroFarm",
      subtitle: "농산물 이커머스 + 판매자(Producer) 기능",
      screenshot: screensBySlug.barofarm?.[0]?.src || "",
      stack: ["Spring Boot", "React", "Oracle"],
      tags: ["E-commerce", "Seller", "Mypage"],
      links: { repo: "", demo: "", docs: "" },

      myScreensKeywords,

      summary: [
        "이커머스 서비스의 사용자 인증/계정 관리와 판매자(Producer) 기능을 담당",
        "마이페이지(배송지/개인정보)로 사용자 관리 기능을 구성",
        "판매자 등록/판매자 페이지로 판매자 운영 기능의 기본 구조를 마련",
      ],
      highlights: [
        "로그인/회원가입/계정찾기 + 마이페이지(배송지/개인정보) 담당",
        "판매자 등록(온보딩) + 판매자 페이지(대시보드/관리 구조) 담당",
      ],

      screens,

      features: [
        {
          title: "인증: 로그인/회원가입/계정 찾기",
          desc: "서비스 기본 진입을 위한 인증/온보딩 흐름을 구성하고, 계정 복구 화면까지 포함해 사용자 접근성을 높였습니다.",
        },
        {
          title: "마이페이지: 배송지/개인정보 관리",
          desc: "배송지 관리(추가/수정) 및 개인정보 수정 기능을 제공해 사용자 계정 관리 UX를 구성했습니다.",
        },
        {
          title: "판매자 등록(온보딩)",
          desc: "약관 동의 및 판매자 등록 신청 흐름을 구성해 일반 사용자에서 판매자로 확장되는 구조를 마련했습니다.",
        },
        {
          title: "판매자 페이지(대시보드/관리 화면)",
          desc: "판매자 대시보드 및 판매자 관리 화면의 구조를 구성해 판매자 운영 경험을 제공했습니다.",
        },
      ],
    };
  })(),
];
